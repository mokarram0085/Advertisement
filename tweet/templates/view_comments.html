{% extends "layout.html" %}

{% block content %}

<style>
    /* Comment Card Hover */
    .comment-card {
        background: #f8f9fa;
        border-left: 5px solid #0d6efd;
        border-radius: 12px;
        padding: 18px;
        transition: 0.2s;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .comment-card:hover {
        transform: scale(1.01);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .add-comment-box {
        background: #ffffff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
</style>

<!-- Page Title -->
<h2 class="mt-4 fw-bold text-primary">
  Comments for: "<span class="text-dark">{{tweet.user.username}}</span>"
</h2>

<!-- Back Button -->
<a href="{% url 'tweet_list' %}" class="btn btn-outline-secondary btn-sm mt-3">
  â¬… Back
</a>

<!-- Comment List -->
<div class="mt-4">

  {% for c in comments %}
    <div class="comment-card mb-3">

      <!-- Username + Time -->
      <div class="d-flex justify-content-between">
          <strong class="text-primary">
            {% if c.user %}
                {{ c.user.username }}
            {% else %}
                Guest
            {% endif %}
          </strong>

          <small class="text-muted">
              {{ c.created_at|timesince }} ago
          </small>
      </div>

      <!-- Comment Text -->
      <p class="mt-2 mb-0">{{ c.text }}</p>

    </div>
  {% empty %}
    <p class="text-muted mt-3">No comments yet.</p>
  {% endfor %}

</div>

<!-- Add Comment Section -->
<div class="mt-5 add-comment-box">
  <h4 class="fw-bold mb-3">Add a Comment</h4>

  <form method="POST" action="{% url 'comment_tweet' tweet.id %}">
    {% csrf_token %}

    <textarea name="comment" class="form-control rounded-3 shadow-sm"
      placeholder="Write your comment..." rows="3" required></textarea>

    <button class="btn btn-primary mt-3 px-4">Post Comment</button>
  </form>
</div>

{% endblock %}
